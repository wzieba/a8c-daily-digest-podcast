# Audio Digest Script

This script automates the creation of an audio digest from a text summary generated by Claude, converts it to a podcast-style audio with distinct male and female voices, and uploads it to Pocket Casts.

## Prerequisites

1.  **Python 3.8+**
2.  **Claude CLI**: Installed and authenticated (`claude login`)
3.  **ffmpeg**: Required for audio conversion (`brew install ffmpeg` on macOS)
4.  **Pocket Casts Account**: Premium/Plus subscription might be required for "My Files"
5.  **Google AI Studio API Key**: For Gemini API (get one at https://aistudio.google.com/apikey)
6.  **ContextA8C Plugin**: The Claude `/context-a8c:digest` command must be available

## Setup

1.  Install dependencies:
    ```bash
    pip install -r requirements.txt
    playwright install chromium
    ```

2.  Create a `.env` file in this directory with your credentials:
    ```env
    GOOGLE_API_KEY=your_google_api_key
    POCKET_CASTS_EMAIL=your_email
    POCKET_CASTS_PASSWORD=your_password
    SUMMARY_LANG=en  # Optional: language code for the summary (default: en)
    ```

## Usage

Run the script:
```bash
python digest_to_audio.py
```

⚠️ **Warning**: This script runs Claude CLI with the `--dangerously-skip-permissions` flag to automate digest generation without interactive prompts. This bypasses Claude's permission system. Use at your own risk and only with trusted plugins.

The script will:
1.  Run `claude "/context-a8c:digest"` to generate the digest text
2.  Rewrite the digest into a podcast-style conversation between two hosts (Sarah and Mike)
3.  Convert the text to audio using Google Gemini (`gemini-2.5-pro-preview-tts`) with multi-speaker TTS:
    - **Sarah** (female voice): Callirrhoe
    - **Mike** (male voice): Charon
4.  Convert the PCM audio to MP3 using ffmpeg
5.  Upload the resulting MP3 to Pocket Casts

The generated audio file is saved to `generated_audio/[date] - [summary].mp3`.
